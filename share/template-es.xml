<package xmlns="http://experience.univ-lyon1.fr/advene/ns" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tst="http://experience.univ-lyon1.fr/advene/ns/test" id="test" dc:creator="oaubert" dc:date="2004-01-20">
	<meta>
		<title xmlns="http://purl.org/dc/elements/1.1/">Recopilacion inicial</title>
	</meta>
	<imports>
	</imports>
	<annotations>
	</annotations>
	<queries>
	</queries>
	<schemas>
		<schema id="simple-text">
			<meta>
				<dc:title>Texto simple</dc:title>
				<dc:subject>Esquema elemental para la anotacion que contenga texto simple
</dc:subject>
			</meta>
			<annotation-types>
				<annotation-type dc:creator="Advene team" id="annotation">
					<meta>
						<representation xmlns="http://experience.univ-lyon1.fr/advene/ns/advenetool"></representation>
						<description xmlns="http://purl.org/dc/elements/1.1/">Simple text annotation</description>
						<dc:title>Anotacion de texto</dc:title>
						<dc:subject>Una simple anotacion textual</dc:subject>
					</meta>
					<content-type mime-type="text/plain"/>
				</annotation-type>
			</annotation-types>
			<relation-types>
				<relation-type dc:creator="Advene team" id="basic-relation">
					<meta>
						<dc:title>Relacion elemental</dc:title>
						<dc:description>Simple puesta en relacion de dos anotaciones</dc:description>
					</meta>
					<member-type xlink:href="#annotation"/>
					<member-type xlink:href="#annotation"/>
					<content-type mime-type="text/plain"/>
					<!-- TODO eventually, this would be an ad-hoc xml schema
          <content-type mime-type="text/xml">
            <schema>...</schema>
          </content-type>
          -->
					<member-types>
						<member-type xlink:href="#annotation"/>
						<member-type xlink:href="#annotation"/>
					</member-types>
				</relation-type>
			</relation-types>
		</schema>
	</schemas>
	<views>
		<view viewable-class="annotation" dc:creator="" id="annotation-view">
			<content mime-type="text/html">&lt;a tal:attributes="href here/absolute_url"&gt;anotacion &lt;em tal:content="here/id"&gt;Id&lt;/em&gt;&lt;/a&gt; (&lt;a tal:attributes="href string: /media/play/${here/fragment/begin}"&gt;Reproducir el fragmento&lt;/a&gt; | &lt;a href="/media/pause"&gt;Pausa&lt;/a&gt; | &lt;a href="/media/stop"&gt;Detener&lt;/a&gt; )
</content>
		</view>
		<view viewable-class="package" dc:creator="oaubert" id="package-view">
			<meta>
				<title xmlns="http://purl.org/dc/elements/1.1/">Vista por defecto de la recopilacion</title>
			</meta>
			<content mime-type="text/html">&lt;h1&gt;Contenido de la recopilacion &lt;em tal:content="here/title"&gt;Titulo&lt;/em&gt; creado por &lt;address tal:content="here/author"&gt;Autor&lt;/address&gt;&lt;/h1&gt;

&lt;h2&gt;&lt;a tal:attributes="href here/annotations/absolute_url"&gt;Anotaciones (&lt;em tal:content="python:len(here.annotations)"&gt;Numero&lt;/em&gt;)&lt;/a&gt;&lt;/h2&gt;

&lt;table border="1"&gt;
&lt;tr&gt;
&lt;th&gt;Tipo de anotacion &lt;/th&gt;
&lt;th&gt;Tipo MIME&lt;/th&gt;
&lt;th&gt;Nombre de la anotacion &lt;/th&gt;
&lt;/tr&gt;

&lt;tr tal:repeat="at here/annotationTypes"&gt;
   &lt;td&gt;&lt;a tal:attributes="href at/absolute_url"
                 tal:content="at/title | at/id"&gt;Tipo de anotacion&lt;/a&gt;&lt;/td&gt;
   &lt;td tal:content="at/mimetype"&gt;Mime-Type&lt;/td&gt;
   &lt;td&gt;&lt;span tal:replace="python:len(at.annotations)"&gt;Numero&lt;/span&gt;
           (&lt;a tal:attributes="href string:${at/absolute_url}/view/annotation_list_view"&gt;visualizador&lt;/a&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;h2&gt;&lt;a tal:attributes="href here/relations/absolute_url"&gt;Relaciones (&lt;em tal:content="python:len(here.relations)"&gt;Numero&lt;/em&gt;)&lt;/a&gt;&lt;/h2&gt;

&lt;table border="1"&gt;
&lt;tr&gt;
&lt;th&gt;Tipo de relacion&lt;/th&gt;
&lt;th&gt;Tipo MIME&lt;/th&gt;
&lt;th&gt;Nombre de relaciones&lt;/th&gt;
&lt;/tr&gt;

&lt;tr tal:repeat="rt here/relationTypes"&gt;
   &lt;td&gt;&lt;a tal:attributes="href rt/absolute_url"
                 tal:content="rt/title | rt/id"&gt;Tipo de relacion&lt;/a&gt;&lt;/td&gt;
   &lt;td tal:content="rt/mimetype"&gt;Mime-Type&lt;/td&gt;
   &lt;td&gt;&lt;span tal:replace="python:len(rt.relations)"&gt;Numero&lt;/span&gt;
           (&lt;a tal:attributes="href string:${rt/absolute_url}/view/relation_list_view"&gt;visualizador&lt;/a&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;h2&gt;&lt;a tal:attributes="href string:${here/absolute_url}/views/view/views-view"&gt;Vistas&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Des &lt;a tal:attributes="href string: ${here/absolute_url}/view/print-default-views"&gt;vistas por defectos &lt;/a&gt; se aplican autoamticamente a los elementos.&lt;/p&gt;

&lt;span tal:replace="structure here/views/view/views-view"&gt;Vistas&lt;/span&gt;

&lt;h2&gt;&lt;a tal:attributes="href string:${here/absolute_url}/schemas"&gt;Esquemas&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li tal:repeat="s here/schemas"&gt;
   &lt;a tal:attributes="href s/absolute_url" tal:content="structure s/view/item-view"&gt;Esquema&lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
		</view>
		<view viewable-class="list" id="bundle-view">
			<content mime-type="text/html">&lt;ul&gt;
&lt;li tal:repeat="item here"&gt;
   &lt;a tal:attributes="href item/absolute_url" tal:content="structure item/view/item-view"&gt;Item&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;</content>
		</view>
		<view viewable-class="list" id="schema-bundle-view">
			<content mime-type="text/html">&lt;h1&gt;Lista de esquemas&lt;/h1&gt;

&lt;ul tal:repeat="item here/ids"&gt;
   &lt;a tal:attributes="href item/absolute_url" tal:content="structure item/view/item-view"&gt;Item&lt;/a&gt;
&lt;/ul&gt;</content>
		</view>
		<view viewable-class="view" id="view-view">
			<content mime-type="text/html">&lt;p&gt;Vista&lt;strong tal:content="here/id"&gt;Id&lt;/strong&gt; aplicable sobre &lt;em tal:content="here/matchFilter"&gt;class&lt;/em&gt;&lt;/p&gt;
&lt;pre tal:content="here/content/data"&gt;
Contenido
&lt;/pre&gt;</content>
		</view>
		<view viewable-class="annotation-type" id="annotation-type-view">
			<content mime-type="text/html">&lt;p&gt;Tipo &lt;a tal:attributes="href here/absolute_url"&gt;&lt;em tal:content="here/id"&gt;id&lt;/em&gt; : &lt;span tal:replace="here/title"&gt;Titulo&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
&lt;span tal:condition="here/meta/dc/description"&gt;
Descripcion : &lt;em tal:content="here/meta/dc/description"&gt;descripcion&lt;/em&gt;&lt;br /&gt;
&lt;/span&gt;
&lt;a tal:attributes="href here/annotations/absolute_url" tal:content="python: '%d annotation(s)' % len(here.annotations)"&gt;Muchas anotaciones&lt;/a&gt;&lt;/p&gt;</content>
		</view>
		<view viewable-class="*" id="edit-content">
			<content mime-type="text/html">&lt;span tal:condition="python: hasattr(here, 'content')"&gt;
&lt;form method="POST" tal:attributes="action here/absolute_url"&gt;
&lt;textarea tal:attributes="cols options/config/edit-width | 60; rows options/config/edit-height | 20" tal:content="here/content/data" rows="20" cols="60" name="data"&gt;
Contenido
&lt;/textarea&gt;&lt;br /&gt;
&lt;input type="hidden" name="key" value="contentData"&gt;
&lt;input type="hidden" name="action" value="update"&gt;
&lt;input type="submit" value="Valider" /&gt;
&lt;/form&gt;
&lt;/span&gt;

&lt;span tal:condition="python: not hasattr(here, 'content')"&gt;
&lt;p&gt;Esta vista solo de aplica sobre los elementos que poseen un contenido&lt;/p&gt;
&lt;/span&gt;
</content>
		</view>
		<view viewable-class="*" id="generic">
			<content mime-type="text/html">&lt;p&gt;Vista generica de &lt;span tal:replace="here/uri"&gt;URI&lt;/span&gt;&lt;/p&gt;
</content>
		</view>
		<view viewable-class="*" id="item-view">
			<content mime-type="text/html">&lt;span tal:replace="here/viewableClass"&gt;Clase&lt;/span&gt;
&lt;strong tal:content="here/id"&gt;Id&lt;/strong&gt;
&lt;span tal:condition="exist: here/matchFilter" comment="is_a_view"&gt;
 aplicable sobre &lt;em tal:content="here/matchFilter"&gt;filtro&lt;/em&gt;
&lt;/span&gt;
</content>
		</view>
		<view viewable-class="schema" id="schema-view">
			<content mime-type="text/html">&lt;h2&gt;Esquema &lt;strong tal:content="here/title | here/id"&gt;Titulo&lt;/strong&gt; (&lt;em tal:content="here/id"&gt;Id&lt;/em&gt;)&lt;/h2&gt;

&lt;p&gt;Descripcion : &lt;em tal:content="here/meta/dc/description | string:Non fournie."&gt;Descripcion&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Tipos de anotacion definidos :&lt;/p&gt;

&lt;ul&gt;
  &lt;li tal:repeat="t here/annotationTypes"&gt;
   &lt;span tal:replace="structure t/view/annotation-type-view"&gt;Tipo&lt;/span&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tipos de relacion definidos :&lt;/p&gt;

&lt;ul&gt;
  &lt;li tal:repeat="t here/relationTypes"&gt;
   &lt;span tal:replace="structure t/view/relation-type-view"&gt;Tipo&lt;/span&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
		</view>
		<view viewable-class="schema" id="add-view">
			<content mime-type="text/html">&lt;h1&gt;Crear una vista nueva en la recopilacion &lt;em tal:content="here/ownerPackage/uri"&gt;Nom&lt;/em&gt;&lt;/h1&gt;
&lt;form method="POST" tal:attributes="action here/ownerPackage/absolute_url"&gt;

&lt;input type="hidden" name="type" value="view"&gt;
&lt;input type="hidden" name="action" value="create"&gt;

Identificador : &lt;input type="text" name="id"&gt;&lt;br /&gt;
Aplicable sobre : &lt;select name="class"&gt;
&lt;option&gt;*&lt;/option&gt;
&lt;option&gt;anotacion&lt;/option&gt;
&lt;option&gt;tipo-anotacion&lt;/option&gt;
&lt;option&gt;contenido&lt;/option&gt;
&lt;option&gt;fragmento&lt;/option&gt;
&lt;option&gt;lista&lt;/option&gt;
&lt;option&gt;paquete&lt;/option&gt;
&lt;option&gt;busqueda&lt;/option&gt;
&lt;option&gt;relacion&lt;/option&gt;
&lt;option&gt;tipo-relacion&lt;/option&gt;
&lt;option&gt;esquema&lt;/option&gt;
&lt;option&gt;vista&lt;/option&gt;
&lt;/select&gt;&lt;br /&gt;
Contenido :&lt;br /&gt;
&lt;textarea name="data" rows="20" cols="80"&gt;
&lt;/textarea&gt;&lt;br /&gt;
&lt;input type="submit" value="Create"&gt;
&lt;/form&gt;
</content>
		</view>
		<view viewable-class="annotation" id="full-view">
			<content mime-type="text/html">&lt;h1&gt;Anotacion &lt;em tal:content="here/id"&gt;Id&lt;/em&gt;&lt;/h1&gt;

&lt;p&gt;Principio: &lt;span tal:replace="here/fragment/begin"&gt;Inicio&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Fin: &lt;span tal:replace="here/fragment/end"&gt;Final&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Tipo: &lt;span tal:replace="here/type"&gt;Tipo&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Tipo del contenido: &lt;span tal:replace="here/content/mimetype"&gt;Content-type&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a tal:attributes="href string:${here/content/absolute_url}/data"&gt;Content&lt;/a&gt;&lt;/p&gt;
</content>
		</view>
		<view viewable-class="view" id="epoz">
			<content mime-type="text/html">    &lt;div class="epoz-fulleditor" metal:use-macro="epozmacros/macros/epoz_fulleditor"&gt;
      &lt;iframe metal:fill-slot="epoz_editorframe"
              id="epoz-editor"
              class="epoz-editorframe" 
              usecss="1"
              tal:attributes="src string:${here/content/data/absolute_url}?mode=raw;
                              dst here/content/absolute_url"
       onload="startEpoz()"&gt;              
&lt;/iframe&gt;
    &lt;/div&gt;
</content>
		</view>
		<view viewable-class="list" id="views-view">
			<content mime-type="text/html">&lt;table border="1"&gt;
  &lt;tr&gt;
  &lt;th&gt;Identificador&lt;/th&gt;
  &lt;th colspan="2"&gt;Filtro&lt;/th&gt;
  &lt;th&gt;Actions&lt;/th&gt;
  &lt;/tr&gt;

 &lt;tr tal:repeat="v here"&gt;
    &lt;td&gt;
     &lt;a tal:attributes="href v/absolute_url" tal:content="structure v/id"&gt;View Id&lt;/a&gt;
    &lt;/td&gt;
    &lt;td tal:content="v/matchFilter/class"&gt;Clase&lt;/td&gt;
    &lt;td tal:content='structure v/matchFilter/type | string::'&gt;Tipo&lt;/td&gt;
    &lt;td&gt;
&lt;a title="Editer la vue" tal:attributes="href string:${v/absolute_url}/view/edit-content"&gt;Editar&lt;/a&gt;
&lt;span tal:condition='python: v.match(v.rootPackage)'&gt;
&lt;span  tal:condition='python:not "ruleset" in v.content.mimetype'&gt;
| &lt;a title="Edition graphique de la vue" tal:attributes="href string:${v/absolute_url}/view/epoz"&gt;Epoz&lt;/a&gt;
| &lt;a title="Appliquer la vue sur ownerPackage" tal:attributes="href string:${v/rootPackage/absolute_url}/view/${v/id}"&gt;Appliquer&lt;/a&gt; &lt;/span&gt;
&lt;/span&gt;
&lt;span  tal:condition='python:"ruleset" in v.content.mimetype'&gt;
| &lt;a title="Activer la vue dynamique" tal:attributes="href string:/media/stbv?id=${v/id}"&gt;Activar&lt;/a&gt; 
&lt;/span&gt;
  &lt;/td&gt;
  &lt;/tr&gt;
 
&lt;/table&gt;
</content>
		</view>
		<view viewable-class="relation" id="relation-view">
			<content mime-type="text/html">Relacion &lt;em tal:content="here/id"&gt;Id&lt;/em&gt; entre &lt;a href="annotation1" tal:attributes="href here/members/first/absolute_url" tal:content="here/members/first/content/data"&gt;Anotacion 1&lt;/a&gt; et &lt;a href="annotation2" tal:attributes="href here/members/last/absolute_url" tal:content="here/members/last/content/data"&gt;Anotacion 2&lt;/a&gt;</content>
		</view>
		<view viewable-class="annotation-type" id="type-view">
			<content mime-type="text/html">&lt;p&gt;Tipo &lt;em tal:content="here/id"&gt;id&lt;/em&gt; : &lt;span tal:replace="here/title"&gt;Titulo&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a here="annotations" tal:attributes="href here/annotations" tal:content="python: '%d annotations' % len(here.annotations)"&gt;Muchas anotaciones&lt;/a&gt; definies.&lt;/p&gt;
</content>
		</view>
		<view viewable-class="relation-type" id="relation-type-view">
			<content mime-type="text/html">&lt;p&gt;Tipo &lt;a tal:attributes="href here/absolute_url"&gt;&lt;em tal:content="here/id"&gt;id&lt;/em&gt; : &lt;span tal:replace="here/title"&gt;Titulo&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
&lt;span tal:condition="here/meta/dc/description"&gt;
Descripcion : &lt;em tal:content="here/meta/dc/description"&gt;descripcion&lt;/em&gt;&lt;br /&gt;
&lt;/span&gt;
&lt;a tal:attributes="href here/relations/absolute_url" tal:content="python: '%d relation(s)' % len(here.relations)"&gt;Muchas anotaciones&lt;/a&gt;&lt;/p&gt;</content>
		</view>
		<view viewable-class="package" dc:date="2004-06-08" dc:creator="oaubert" id="text-caption">
			<meta>
				<title xmlns="http://purl.org/dc/elements/1.1/">Visualizacion de las anotaciones textuales sobre el video</title>
			</meta>
			<content mime-type="application/x-advene-ruleset">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;ruleset xmlns='http://experience.univ-lyon1.fr/advene/ns/advenetool'&gt;
  &lt;rule name='Visualizacion de las anotaciones textuales'&gt;
    &lt;event name='AnnotationBegin'/&gt;
    &lt;condition operator='equals' rhs='string:text/plain' lhs='annotation/content/mimetype'/&gt;
    &lt;action name='AnnotationCaption'&gt;
      &lt;param name='message' value='annotation/content/data'/&gt;
    &lt;/action&gt;
  &lt;/rule&gt;
&lt;/ruleset&gt;
</content>
		</view>
		<view viewable-class="*" dc:date="2004-06-30" dc:creator="oaubert" id="annotation_list_view">
			<meta>
				<title xmlns="http://purl.org/dc/elements/1.1/">annotation_list_view</title>
			</meta>
			<content mime-type="text/html">&lt;h2&gt;&lt;a tal:attributes="href here/annotations/absolute_url"&gt;Anotaciones de &lt;span tal:replace="here/title | here/id"&gt;elemento&lt;/span&gt; (&lt;em tal:content="python:len(here.annotations)"&gt;Numero&lt;/em&gt;)&lt;/a&gt;&lt;/h2&gt;

&lt;table width="100%" border="1"&gt;

&lt;tr&gt;
&lt;th&gt;Id&lt;/th&gt;
&lt;th&gt;Principio&lt;/th&gt;
&lt;th&gt;Fin&lt;/th&gt;
&lt;th&gt;Contenido&lt;/th&gt;
&lt;/tr&gt;

&lt;tr tal:repeat="a here/annotations"&gt;

&lt;td&gt;
&lt;a tal:attributes="href a/absolute_url; title a/type/title | a/type/id" tal:content="a/id"&gt;Id&lt;/a&gt;
&lt;/td&gt;

&lt;td&gt;
&lt;a tal:attributes="href string:/media/play/${a/fragment/begin}; title string:Lancer le lecteur" tal:content="a/fragment/formatted/begin"&gt;Inicio&lt;/a&gt;
&lt;/td&gt;

&lt;td&gt;
&lt;a tal:attributes="href string:/media/play/${a/fragment/end}; title string:Lancer le lecteur" tal:content="a/fragment/formatted/end"&gt;Fin&lt;/a&gt;
&lt;/td&gt;

&lt;td tal:content="a/content/data"&gt;Contenido&lt;/td&gt;

&lt;/tr&gt;

&lt;/table&gt;
</content>
		</view>
	</views>
</package>
