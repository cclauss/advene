<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us"> 
<head>
 <title> AdveneUserGuide</title>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />  
 <style type="text/css">
/* tables */
table.topic {border-collapse:collapse;border: 1px solid black;border-spacing: 0px}
table.topic tr th {text-align:left;font-weight: bold; padding: 2px;}
table.topic tr td {padding: 2px;}
table.topic tr td ul {padding-left:0em; margin-left:1.5em;}

/* contents */
blockquote {border: thin solid black; padding: 1%; margin: 2%;} 
dt { font-weight: bold;float: left;display:inline;margin-right: 1em}
dd { display:block; margin-left: 2em}
dl.block dt {float: none;display:block;margin-right: 0em}
dl.signature dd {margin-left: 30em}

 </style>
</head>
<body bgcolor='#ffffff'>
<a name="PageTop"></a>
<table width="100%" border="2" cellpadding="3" cellspacing="0">
  <tr>
    <td>
      <b><font size='+1'>KShare . <font>Annotation</font> .</font> </b><font size="+2"><b>AdveneUserGuide</b></font>
    </td>
  </tr>
</table>
<p />
<style type="text/css">.francais {  background-color:#ddddff; } .english { background-color:#ddffdd; }</style>
<div class=francais>
<p />
<div class="twikiToc">
<ul>
<li> <a href="#Documentation_utilisateur_pour_A">Documentation utilisateur pour Advene / <span class=english>Advene user guide</span></a>
<ul>
<li> <a href="#Cr_ation_d_un_recueil_english_Cr">Création d'un recueil / <span class=english>Creating a package</span></a>
<ul>
<li> <a href="#S_lection_du_support_vid_o_engli">Sélection du support vidéo / <span class=english>Selecting the video data</span></a>
</li>
<li> <a href="#Cr_ation_des_annotations_english">Création des annotations / <span class=english>Creating annotations</span></a>
<ul>
<li> <a href="#Cr_ation_au_vol_english_Creation">Création au vol / <span class=english>Creation at visualization time</span></a>
</li>
<li> <a href="#Cr_ation_par_import_d_autres_for">Création par import d'autres formats /<span class=english>Creation by importing other formats</span></a>
</li>
<li> <a href="#Cr_ation_par_alignement_d_une_tr">Création par alignement d'une transcription / <span class=english>Creation by alignment transcription</span></a>
</li>
</ul>
</li>
</ul>
</li>
<li> <a href="#Visualisation_des_annotations">Visualisation des annotations</a>
<ul>
<li> <a href="#Vue_en_ligne_de_temps">Vue en ligne de temps</a>
<ul>
<li> <a href="#Transmutation_d_annotations">Transmutation d'annotations</a>
</li>
</ul>
</li>
<li> <a href="#Vue_arborescente">Vue arborescente</a>
</li>
<li> <a href="#Vue_hypertexte">Vue hypertexte</a>
</li>
<li> <a href="#Vue_transcription">Vue transcription</a>
</li>
</ul>
</li>
<li> <a href="#Syntaxe_TALES">Syntaxe TALES </a>
<ul>
<li> <a href="#Le_mod_le_Advene">Le modèle Advene</a>
</li>
<li> <a href="#Utilisation_dans_le_serveur_web">Utilisation dans le serveur web</a>
</li>
<li> <a href="#Utilisation_dans_les_vues_statiq">Utilisation dans les vues statiques</a>
</li>
<li> <a href="#Utilisation_dans_les_vues_dynami">Utilisation dans les vues dynamiques</a>
</li>
<li> <a href="#Utilisation_dans_les_requ_tes">Utilisation dans les requêtes</a>
</li>
</ul>
</li>
<li> <a href="#Vues_dynamiques">Vues dynamiques</a>
<ul>
<li> <a href="#D_finition">Définition</a>
</li>
<li> <a href="#D_marrage_automatique">Démarrage automatique</a>
</li>
</ul>
</li>
<li> <a href="#Vues_statiques">Vues statiques</a>
<ul>
<li> <a href="#Vue_par_d_faut">Vue par défaut</a>
</li>
</ul>
</li>
<li> <a href="#D_finition_d_un_sch_ma">Définition d'un schéma</a>
<ul>
<li> <a href="#Cr_ation_d_un_nouveau_sch_ma">Création d'un nouveau schéma</a>
</li>
<li> <a href="#Ajout_d_un_type_d_annotation_un">Ajout d'un type d'annotation à un schéma</a>
</li>
<li> <a href="#Ajout_d_un_type_de_relation_un_s">Ajout d'un type de relation à un schéma</a>
</li>
</ul>
</li>
<li> <a href="#dition_des_l_ments_du_recueil">Édition des éléments du recueil</a>
<ul>
<li> <a href="#Points_communs">Points communs</a>
</li>
<li> <a href="#Sp_cifique_aux_recueils">Spécifique aux recueils</a>
</li>
<li> <a href="#Types_d_annotation">Types d'annotation</a>
<ul>
<li> <a href="#Forme_structur_e_simpliste">Forme structurée simpliste</a>
</li>
</ul>
</li>
<li> <a href="#Types_de_relation">Types de relation</a>
</li>
<li> <a href="#Vues">Vues</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div> 
<p />
<h1><a name="Documentation_utilisateur_pour_A"> </a> Documentation utilisateur pour Advene / <span class=english>Advene user guide</span> </h1>
<p />
<h2><a name="Cr_ation_d_un_recueil_Creating_a"> </a> Création d'un recueil / <span class=english>Creating a package</span> </h2>
<p />
Lors du lancement de l'application, un recueil de base est chargé. Il
contient un schéma appelé <em>Texte simple</em> qui définit un 
type d'annotation <em>Annotation texte</em> et un type de relation
<em>Relation élémentaire</em>. Il est donc possible de commencer
immédiatement à annoter une vidéo avec ce schéma initial.
<p />
<p class=english>
When the application is launched, a base package is loaded. It contains 
one schema <em>Texte simple</em> (Simple text), which defines 
one annotation type <em>Annotation texte</em> (Textual annotation) and one relation type 
<em>Relation élémentaire</em> (Elementary relation). It is thus possible to 
immediately annotate a video  with this initial schema.
<p />
<h3><a name="S_lection_du_support_vid_o_Selec"> </a> Sélection du support vidéo / <span class=english>Selecting the video data</span> </h3>
<p />
Le choix du support vidéo s'effectue à travers l'interface graphique
de l'application. On peut choisir un DVD par l'icône représentant un
DVD (il faut alors préciser le titre et le chapitre où le film
commence), ou bien un fichier vidéo par l'icône représentant une
touche <em>Eject</em>.
<p />
Une fois le support choisi, il est possible de naviguer dans le film
par le biais des boutons de navigation (lecture, pause, avance et
retour rapide) et par le biais du curseur indiquant la position
courante.
<p />
<div class=english>
The choice of the video data is done through the application Graphical User Interface (GUI). It is possible to select either a DVD, through the DVD icon (and the select the appropriate title and chapter), or a video file through the <em>Eject</em> icon.
<p />
Once the video data selected, it is possible to navigate in the movie with the navigation buttons (play, pause, fast forward and rewind) and with the cursor indicating the current position.
</div>
<p />
<h3><a name="Cr_ation_des_annotations_Creatin"> </a> Création des annotations / <span class=english>Creating annotations</span> </h3>
<p />
<h4><a name="Cr_ation_au_vol_Creation_at_visu"> </a> Création au vol / <span class=english>Creation at visualization time</span> </h4>
<p />
Les annotations se créent en cours de visualisation. Au début du
fragment vidéo concernant l'annotation, il faut utiliser (en faisant
attention que la fenêtre de l'application soit active) la touche
<em>Entrée</em> ou bien la touche <em>Espace</em>. 
<p />
Ces deux touches permettent de rentrer en mode d'édition d'une
nouvelle annotation. La différence entre les deux est que la touche
<em>Espace</em> met automatiquement le film en pause.
<p />
Il est possible d'utiliser les commandes de navigation dans le film
pendant l'édition d'une annotation. La touche <em>Tab</em> permet notamment
de mettre le film en pause ou bien de le relancer.
<p />
À la fin du fragment vidéo concernant l'annotation, on valide
l'annotation par la touche <em>Entrée</em>.
<p />
Deux remarques :
<ul>
<li> on voit que cette méthode ne permet pas d'éditer simultanément plusieurs nouvelles annotations
</li>
<li> dans le cas où plusieurs types d'annotation sont définis dans le  recueil, il faut au préalable (avant le début de l'édition) choisir  le type d'annotation que l'on souhaite créer en le choisissant dans  la liste intitulée <em>Type courant</em>.
</li>
</ul>
<p />
<p />
<div class=english>
The annotations are created in course of visualization. At the beginning of the annotation, it is necessary to use (in attention that the window of the application is active) the key <em>Enter</em> or the <em>Space</em> key.
<p />
Both keys change to the edition mode of a new annotation. The difference is that the key <em>Space</em> automatically puts the film in pause.
<p />
It is possible to use the film navigation icons during the edition of an annotation. The <em>Tab</em> key in particular allows you to put the film in pause or to start it again.
<p />
At the end of the video fragment concerning the annotation, you can validate the annotation by the key <em>Enter</em>.
<p />
Two notes: 
<p />
<ul>
<li> This method does not make possible to publish several new annotations simultaneously.
</li>
<li> If several types of annotation are defined in the collection, it is necessary (before the beginning of the edition) to choose the type of annotation which you wishes to create by choosing it in the Current Type list.
</li>
</ul>
<p />
</div>
<p />
<h4><a name="Cr_ation_par_import_d_autres_for"> </a> Création par import d'autres formats /<span class=english>Creation by importing other formats</span> </h4>
<p />
Un module d'import permet de générer un ensemble d'annotations (et
bien souvent également de schémas) à partir d'un fichier dans un autre
format. Les format supportés pour l'instant (version 0.16) sont :
<p />
<ul>
<li> un format texte élémentaire (fichiers <code>.txt</code>), où chaque ligne contient le temps de début, le temps de fin et le contenu de l'annotation, séparés par des espaces.
</li>
<li> le format de sous-titre SRT (fichiers <code>.srt</code>).
</li>
<li> le format Xi (fichiers <code>.xml</code>)
</li>
<li> le format <a class="twikiLink" href="/advene/twiki/bin/view.pl/Annotation/ELAN">ELAN</a> (fichiers <code>.eaf</code>)
</li>
</ul>
<p />
L'import de données s'effectue par le menu <em>Fichier/Importer un fichier</em>
<p />
<div class=english>
The import module can generate a package of annotations (and often also diagrams) from another format file. The formats supported at the moment (version 0.16) are:
<p />
<ul>
<li> Elementary text (.txt files), where each line contains the time of beginning, the time of the end and the contents of the annotation, separated by spaces. 
</li>
<li> the subtitle format SRT (.srt files). 
</li>
<li> format Xi (xml files)
</li>
<li> the format <a class="twikiLink" href="/advene/twiki/bin/view.pl/Annotation/ELAN">ELAN</a> (.eaf files).
</li>
</ul>
<p />
You can import external data in the menu <em>file/Import file</em> 
</div>
<p />
<h4><a name="Cr_ation_par_alignement_d_une_tr"> </a> Création par alignement d'une transcription / <span class=english>Creation by alignment transcription</span> </h4>
<p />
Il est possible, à partir d'une transcription textuelle du contenu de
la vidéo, de poser simplement des bornes temporelles et de générer à
partir du texte et des bornes temporelles des annotations.
<p />
Pour accéder à cette fonctionnalité, il faut utiliser le menu
<em>Fichier/Importer une transcription</em>.
<p />
Après avoir lancé la lecture de la vidéo, on pose des bornes en
cliquant dans le texte aux bons moments. Il est possible de supprimer
des bornes posées par erreur en cliquant dessus. Par ailleurs, un clic
droit sur une borne permet d'accéder directement au temps associé dans
la vidéo, ainsi que d'effectuer de petits ajustements du temps
associé. Il est également possible de signaler que tout ce qui suivra cette 
borne (jusqu'à la prochaine) ne doit pas servir à la génération des 
annotations. Ceci est signalé visuellement par un changement de couleur
de la borne.
<p />
À la fin de l'édition des bornes, cliquez sur <em>Convertir</em> pour
convertir le texte en annotaions, dans un type choisi.
<p />
<div class=english>
It is possible, from a textual transcription of the contents of the video, to simply pose temporal terminals, to generate annotations, from the text with temporal terminals of the annotations.
<p />
To reach this function, it is necessary to use the menu <em>Fichier/Importer une transcription</em>.
</div>
<h2><a name="Visualisation_des_annotations"> </a> Visualisation des annotations </h2>
<p />
Après avoir créé quelques annotations, il devient possible de les
visualiser par le biais de l'interface graphique et par le biais du
serveur web. Nous allons détailler quelques un de ces modules de
visualisation.
<p />
<h3><a name="Vue_en_ligne_de_temps"> </a> Vue en ligne de temps </h3>
<p />
La vue en ligne de temps est accessible par le biais du menu
<em>Vue</em>. Elle offre une représentation linéaire des annotations, où
chaque ligne représente un type d'annotation. Le curseur en bas à
gauche de la fenêtre indique la portion du film représentée à
l'écran. Pour représenter l'intégralité du film, il faut donc le fixer
à 1.
<p />
En cliquant sur les boutons représentant les annotations, on accède à
un menu permettant entre autres de les éditer et d'accéder directement
au fragment de la vidéo correspondant.
<p />
Pour accéder à un moment quelconque de la vidéo, il suffit de cliquer
avec le bouton droit dans la fenêtre.
<p />
<div class=english>
To manipulate the zoom factor, multiple possibilities are offered:
<ul>
<li> use the slider in the lower left-hand corner of the window
</li>
<li> use the keys 1 to 9, which display an inversed fraction of the video (ie. 1 displays the whole timeline, 9 displays a small fraction of the timeline)
</li>
<li> click on the timestamps marks that are on the top of the window. Left-click zooms in, right-click zooms out.
</li>
</ul>
</div>
<p />
<h4><a name="Transmutation_d_annotations"> </a> Transmutation d'annotations </h4>
<p />
Pour changer le type d'une annotation, il suffit d'effectuer un glisser-déplacer sur le type d'annotation correspondant dans la légende de la ligne de temps. Si l'icône de suppression est active, l'annotation d'origine sera supprimée ; sinon, elle sera simplement dupliquée avec un nouveau type.
<p />
<p />
<h3><a name="Vue_arborescente"> </a> Vue arborescente </h3>
<p />
Une vue arborescente du contenu du recueil est accessible dans la
fenêtre principale de l'application. Il est également possible d'en
ouvrir de nouvelles par le biais du menu <em>Vue</em>.
<p />
L'intérêt de cette vue est de permettre la création de nouveaux
éléments dans le recueil, par le biais des menus contextuels
accessible par un clic droit sur les éléments.
<p />
Le menu contextuel du recueil (élément racine de l'arbre) permet de
créer de nouveaux schémas, de nouvelles vues ou de nouvelles requêtes.
<p />
Le menu contextuel des schémas permet de créer de nouveaux types
 d'annotation ou de relation à l'intérieur du schéma concerné.
<p />
<h3><a name="Vue_hypertexte"> </a> Vue hypertexte </h3>
<p />
Un serveur web intégré à l'application, utilisant le mécanisme des
 vues du modèle Advene, permet d'accéder au contenu du recueil par le
 biais d'un simple navigateur web.
<p />
Pour cela, on peut utiliser l'élément <em>Lancer le navigateur web</em> du
menu <em>Vue</em> ou bien indiquer directement l'URL adéquate au navigateur:
<p />
<a href="http://localhost:1234/packages/advene/" target="_top">http://localhost:1234/packages/advene/</a>
<p />
Des vues définies par défaut dans le recueil modèle permettent de
naviguer à l'intérieur du recueil.
<p />
<h3><a name="Vue_transcription"> </a> Vue transcription </h3>
<p />
Cette vue permet d'afficher l'ensemble des annotations d'un même type
concaténées de manière à produire un texte. Sa principale utilité est
de présenter un ensemble d'annotation transcrivant un dialogue de
manière à localiser une annotation dans l'ensemble du texte.
<p />
On accède à cette vue de deux manières : soit en cliquant avec le
bouton droit sur un type d'annotation dans une vue arborescente, et en
choisissant l'item <em>Transcription</em>, soit à partir du menu <em>Vues</em> de
l'application principale.
<p />
#TALES
<h2><a name="Syntaxe_TALES"> </a> Syntaxe TALES  </h2>
<p />
La syntaxe TALES (<em>TAL Expression Syntax</em>) est utilisée dans plusieurs
composants d'Advene pour adresser des éléments du modèle Advene :
<p />
<ul>
<li> dans le serveur web (construction des adresses)
</li>
<li> dans les vues dynamiques (définition des conditions et paramètres des actions)
</li>
<li> dans les vues statiques (motifs de remplacement)
</li>
<li> dans les requètes simples (définition des conditions)
</li>
</ul>
<p />
Il est donc important de comprendre cette syntaxe, et le modèle
sous-jacent, pour pouvoir profiter au mieux des possibilités offertes
par Advene.
<p />
<h3><a name="Le_mod_le_Advene"> </a> Le modèle Advene </h3>
<p />
Hiérarchie (package, schemas, annotationTypes, relationTypes, annotations,
relations, views) FIXME
<p />
Cette hiérarchie peut être considérée comme un système de fichiers,
dans lequel on va trouver des éléments. Une expression TALES
correspondra alors à un chemin d'accès dans ce système de fichiers.
<p />
Une particularité d'Advene est que des éléments peuvent être accédés
par plusieurs chemins. Ainsi, une annotation se trouvera dans le
"répertoire" <code>package/annotations</code> et dans le "répertoire"
<code>package/annotationTypes/simple_text/annotations</code>.
<p />
<h3><a name="Utilisation_dans_le_serveur_web"> </a> Utilisation dans le serveur web </h3>
<p />
Le serveur web intégré à Advene interprète directement des expressions
TALES. Il est donc possible de naviguer à l'intérieur de la structure
de données pour explorer son contenu.
<p />
Le point de départ des expressions TALES est l'URL
<a href="http://localhost:1234/packages/advene/" target="_top">http://localhost:1234/packages/advene/</a>
<p />
Ce qui suit sera évalué comme une expression TALES.
<p />
Ainsi, 
<p />
<a href="http://localhost:1234/packages/advene/annotationTypes/simple_text/annotations/a4" target="_top">http://localhost:1234/packages/advene/annotationTypes/simple_text/annotations/a4</a>
<p />
renverra l'annotation d'identificateur <code>a4</code> contenue dans les annotations de type
<code>simple_text</code>.
<p />
<h3><a name="Utilisation_dans_les_vues_statiq"> </a> Utilisation dans les vues statiques </h3>
<p />
Les vues statiques (UTBV) permettent de spécifier un mode de rendu
pour un élément quelconque du modèle. Elles consistent en des modèles
de documents (<em>templates</em>) utilisant la syntaxe TAL. TAL utilise TALES
pour spécifier quel contenu doit être inséré aux endroits précisés.
<p />
Les éléments de base des expressions TALES sont:
<p />
<ul>
<li> <code>here</code> : l'élément courant
</li>
<li> <code>options</code> : un ensemble d'éléments optionnels accessibles :
<ul>
<li> <code>options/package_url</code> : l'URL du recueil courant
</li>
<li> <code>options/snapshot</code>    : un accès aux snapshots mémorisés
</li>
<li> <code>options/config</code>      : des options de configuration
</li>
</ul>
</li>
</ul>
<p />
<a name="STBVRootElements"></a>
<h3><a name="Utilisation_dans_les_vues_dynami"> </a> Utilisation dans les vues dynamiques </h3>
<p />
Des éléments semblables sont disponibles dans les vues dynamiques,
afin de spécifier à la fois les conditions devant être remplies et les
paramètres des actions à effectuer. Par contre, plus d'éléments "de
base" sont accessibles, dont certains ne sont définis que lors
d'événements particuliers :
<p />
<ul>
<li> <code>package</code> : le recueil courant
</li>
<li> <code>annotation</code> : l'annotation ayant déclenché l'événement
</li>
<li> <code>relation</code> : la relation ayant déclenché l'événement
</li>
<li> <code>activeAnnotations</code> : la liste des annotations actives
</li>
<li> <code>player</code> : le lecteur vidéo
</li>
<li> <code>event</code> : le nom de l'événement
</li>
</ul>
<p />
<a name="QueryRootElements"></a>
<h3><a name="Utilisation_dans_les_requ_tes"> </a> Utilisation dans les requêtes </h3>
<p />
Les requêtes utilisent également une syntaxe TALES permettant de
spécifier
<ol>
<li> l'ensemble des éléments sur lequel on va appliquer un filtre
</li>
<li> les conditions de prise en compte d'un élément
</li>
<li> la valeur de retour
</li>
</ol>
<p />
Pour les deux derniers paramètres, un élément de base supplémentaire
est défini. Il a pour nom <code>element</code> et prend la valeur de l'élément
testé. Rappelons que l'élément de base <em>here</em> correspond alors à la
valeur de l'élément sur lequel on applique la requète.
<p />
Ainsi, pour obtenir les annotations de même type précédant
l'annotation sur laquelle on applique la requête, et en retourner les
identificateurs, on utilise la syntaxe suivante :
<p />
<ul>
<li> Ensemble d'origine: <code>here/type/annotations</code>
</li>
<li> Condition:  <code>element</code> <em>is before (Allen)</em> <code>here</code>
</li>
<li> Valeur de retour: <code>element/id</code>
</li>
</ul>
<p />
et appliquer la requête sur l'annotation désirée par le biais d'une
expression TALES :
<code>/package/annotations/last/query/annotations_before</code>
<p />
<h2><a name="Vues_dynamiques"> </a> Vues dynamiques </h2>
<p />
<h3><a name="D_finition"> </a> Définition </h3>
<p />
Une vue dynamique est un ensemble de règles, qui seront appliquées lors de la lecture d'une vidéo. La lecture de la vidéo, couplée à la structure d'annotation, permet de générer un certain nombre d 'événements (<code>AnnotationBegin</code>, <code>AnnotationEnd</code>, <code>PlayerPause</code>, etc). Une règle va préciser 
<ol>
<li> L'événement qui peut la déclencher
</li>
<li> Un ensemble de conditions à vérifier
</li>
<li> Un ensemble d'actions à effectuer
</li>
</ol>
<p />
La syntaxe des conditions utilise la <span class="twikiNewLink" style='background : #FFFFCE;'><font color="#0000FF">syntaxe TALES</font><a href="/advene/twiki/bin/edit.pl/Annotation/TALES?topicparent=Annotation.AdveneUserGuide"><sup>?</sup></a></span>, enrichie d'un certain nombre d'<a class="twikiAnchorLink" href="/advene/twiki/bin/view.pl/Annotation/AdveneUserGuide#STBVRootElements">éléments racine</a> spécifiques au contexte (l'annotation déclenchante, l'événement lui-même, etc).
<p />
L'utilisation la plus courante est de filtrer l'événement <code>AnnotationBegin</code> sur un type d'annotation particulier, ce qui donne la syntaxe suivante :
<p />
<code>annotation/type</code> <em>est égal à</em> <code>packages/annotationTypes/foobar</code>
<p />
<a name="DefaultSTBV"></a>
<h3><a name="D_marrage_automatique"> </a> Démarrage automatique </h3>
<p />
Il est possible de spécifier une vue dynamique par défaut, qui sera activée dès le chargement du recueil. Pour cela, il faut éditer le recueil lui-même (via la vue en arbre) et indiquer dans le champ <em>Vue dynamique par défaut</em> l'identificateur de la vue dynamique.
<p />
Si on souhaite de plus effectuer des actions particulières (affichage d'un message, démarrage du lecteur vidéo, etc), il suffit de spécifier dans la vue dynamique une règle réagissant à l'événement <em>Activation de la vue</em>.
<p />
<h2><a name="Vues_statiques"> </a> Vues statiques </h2>
<p />
<a name="DefaultUTBV"></a>
<h3><a name="Vue_par_d_faut"> </a> Vue par défaut </h3>
<p />
Il est possible de spécifier une vue statique par défaut, qui sera chargée lors de l'appui sur le bouton <em>Navigateur web</em> dans la barre d'outils. Pour cela, il faut éditer le recueil lui-même (via la vue en arbre) et indiquer dans le champ <em>Vue statique par défaut</em> 
l'identificateur de la vue.
<p />
<h2><a name="D_finition_d_un_sch_ma"> </a> Définition d'un schéma </h2>
<p />
XXX
<p />
<h3><a name="Cr_ation_d_un_nouveau_sch_ma"> </a> Création d'un nouveau schéma </h3>
<p />
La création d'un nouveau schéma s'effectue à partir de la vue arborescente. Il faut cliquer-droit sur le recueil et sélectionner <em>Créer un nouveau schéma</em>, puis fournir les informations demandées.
<p />
<h3><a name="Ajout_d_un_type_d_annotation_un"> </a><a name="Ajout_d_un_type_d_annotation_un_"> </a> Ajout d'un type d'annotation à un schéma </h3>
<p />
La création d'un nouveau type d'annotation s'effectue à partir de la vue arborescente. Il faut cliquer-droit sur le schéma dans lequel on souhaite créer le nouveau type et sélectionner <em>Créer un nouveau type d'annotation</em>, puis fournir les informations demandées.
<p />
<h3><a name="Ajout_d_un_type_de_relation_un_s"> </a> Ajout d'un type de relation à un schéma </h3>
<p />
La création d'un nouveau type de relation s'effectue à partir de la vue arborescente. Il faut cliquer-droit sur le schéma dans lequel on souhaite créer le nouveau type et sélectionner <em>Créer un nouveau type de relation</em>, puis fournir les informations demandées.
<p />
<h2><a name="dition_des_l_ments_du_recueil"> </a><a name="_dition_des_l_ments_du_recueil"> </a> Édition des éléments du recueil </h2>
<p />
L'édition des éléments du recueil est acccessible à partir des différentes vues. Nous conseillons dans un premier temps d'utiliser la vue arborescente afin de percevoir la structure des informations.
<p />
<h3><a name="Points_communs"> </a> Points communs </h3>
<p />
L'ensemble des éléments du modèle possèdent les attributs suivants :
<dl>
<dt> URI</dt><dd> l'URI de l'élément (i.e. l'URI du recueil + l'identificateur de l'élément)
</dd>
</dl>
<p />
<dl>
<dt> id</dt><dd> l'identificateur de l'élément (sauf pour le recueil)
</dd>
</dl>
<p />
<dl>
<dt> Titre</dt><dd> le titre de l'élément (qui sera affiché de préférence à l'identificateur dans les  différentes vues)
</dd>
</dl>
<p />
<dl>
<dt> Auteur</dt><dd> le créateur de l'élément
</dd>
</dl>
<p />
<dl>
<dt> Date</dt><dd> la date de création de l'élément
</dd>
</dl>
<p />
<dl>
<dt> Description</dt><dd> une description en quelques mots de l'élément
</dd>
</dl>
<p />
Les attributs <code>URI</code> et <code>id</code> ne sont pas modifiables (ils se retrouvent donc en gras). 
<p />
<h3><a name="Sp_cifique_aux_recueils"> </a> Spécifique aux recueils </h3>
<p />
Les recueils possèdent deux attributs supplémentaires, <em><a class="twikiAnchorLink" href="/advene/twiki/bin/view.pl/Annotation/AdveneUserGuide#DefaultSTBV">Vue dynamique par défaut</a></em> et <em><a class="twikiAnchorLink" href="/advene/twiki/bin/view.pl/Annotation/AdveneUserGuide#DefaultUTBV">Vue statique par défaut</a></em>, qui permettent de spécifier des vues à activer par défaut lors du chargement du recueil ou de l'activation du navigateur web. 
<p />
<h3><a name="Types_d_annotation"> </a> Types d'annotation </h3>
<p />
Les types d'annotations permettent de spécifier de plus le type MIME du contenu de leurs annotations (champ <em>Type MIME</em>), ainsi qu'une expression de génération de la représentation des annotations (champ <em>Représentation</em>).
<p />
Pour le premier champ, les valeurs sont typiquement
<dl>
<dt> =text/plain=</dt><dd> du texte simple
</dd>
</dl>
<p />
<dl>
<dt> =application/x-advene-structured=</dt><dd> une <a class="twikiAnchorLink" href="/advene/twiki/bin/view.pl/Annotation/AdveneUserGuide#AdveneStructured">forme structurée simpliste</a>
</dd>
</dl>
<p />
<dl>
<dt> =text/xml=</dt><dd> du XML
</dd>
</dl>
<p />
Le second champ (<em>Représentation</em>) permet d'indiquer une expression à appliquer à l'annotation du type édité. Son utilisation typique est dans le cas d'un type d'annotation structuré (sous la forme structurée simpliste, ou en XML, etc), où on ne veut pas représenter les annotations correspondantes par l'intégralité de leur contenu. On peut alors préciser le champ à utiliser pour construire la représentation, via une expression TALES.
<p />
Ainsi, une annotation structurée possédant les champs <code>titre</code>, <code>contenu</code> et <code>numero</code> pourra utiliser comme représentation
<p />
<code>here/content/parsed/titre</code>
<p />
voire
<p />
<code>string:${here/content/parsed/numero}: ${here/content/parsed/titre}</code>
<p />
<a name="AdveneStructured"></a>
<h4><a name="Forme_structur_e_simpliste"> </a> Forme structurée simpliste </h4>
<p />
La forme structurée simpliste permet de créer facilement des annotations contenant différents champs. Pour cela, on crée autant de lignes que de champs, où chaque ligne est de la forme <pre>nom=valeur</pre>
<p />
Ainsi, une annotation structurée possédant les champs <code>titre</code>, <code>contenu</code> et <code>numero</code> pourra contenir
<pre>
numero=42
titre=Surprise !
contenu=Le héros entre dans la pièce et découvre tous ses amis.
</pre>
<p />
L'exploitation de ce type de contenu s'effectue dans les expressions TALES par le biais de la méthode <code>parsed</code> appliquée au contenu. Ainsi, pour accéder au numéro du plan, on utilise la syntaxe <code>here/content/parsed/numero</code>
<p />
<h3><a name="Types_de_relation"> </a> Types de relation </h3>
<p />
Les types de relations permettent de contraindre le type des annotations mises en relation. Cela s'effectue dans la fenêtre d'édition via le champ <em>Membres</em> où il est possible d'insérer, de supprimer et de réordonner les types d'annotations.
<p />
<h3><a name="Vues"> </a> Vues </h3>
<p />
Les vues sont applicables sur tout élément du modèle. Il est possible de contraindre leur utilisation à certains types d'éléments en précisant les champs <em>Classe</em> et <em>Type</em>. Le champ <em>Classe</em> est par défaut fixé à <code>*</code>, indiquant le caractère générique de la vue. Si on souhaite restreindre son application à un recueil, il faut indiquer <code>package</code>. Les différentes valeurs possibles sont :
<ul>
<li> <code>package</code>
</li>
<li> <code>schema</code>
</li>
<li> <code>annotation-type</code>
</li>
<li> <code>relation-type</code>
</li>
<li> <code>view</code>
</li>
<li> <code>annotation</code>
</li>
<li> <code>relation</code>
</li>
<li> <code>list</code> : Dans ce cas, on peut préciser le type des éléments contenus dans la liste, dans le champ <em>Type</em>
</li>
</ul>
<p />
Chaque vue possède un type MIME, définissant son contenu. Ce champ contient généralement les valeurs <code>text/html</code> (du HTML), <code>image/svg+xml</code> (du SVG) ou <code>text/plain</code> (du simple texte).
<p />
Un cas particulier est celui des vues dynamiques, qui utilise un type interne : <code>application/x-advene-ruleset</code>.
<p />
<p />
<hr>
<table width="100%" border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top">
      <code>-----</code> Revision r1.15 - 02 Mar 2005 - 16:57 - Main.SinuheHernandez
    </td>
  </tr>
</table>
<p />
<a name="PageBottom"></a>
</body>
</html>
