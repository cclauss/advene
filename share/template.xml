<?xml version="1.0" encoding="UTF-8"?>
<package xmlns='http://experience.univ-lyon1.fr/advene/ns' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:tst='http://experience.univ-lyon1.fr/advene/ns/test' id='test' dc:creator='oaubert' dc:date='2004-01-20'>
  <meta>
    <title xmlns='http://purl.org/dc/elements/1.1/'>Template package</title>
  </meta>
  <imports>
  </imports>
  <annotations>
  </annotations>
  <queries>
  </queries>
  <schemas>
    <schema id='simple-text'>
      <meta>
        <dc:title>Texte simple</dc:title>
        <dc:subject>Schéma élémentaire pour l'annotation avec du simple texte</dc:subject>
      </meta>
      <annotation-types>
        <annotation-type id='annotation'>
          <meta>
            <dc:title>Annotation texte</dc:title>
            <dc:subject>Une simple annotation textuelle</dc:subject>
          </meta>
        </annotation-type>
      </annotation-types>
      <relation-types>
        <relation-type id='basic-relation'>
          <meta>
            <dc:title>Relation elementaire</dc:title>
            <dc:description>Simple mise en relation de deux annotations.</dc:description>
          </meta>
          <member-type xlink:href='#annotation'/>
          <member-type xlink:href='#annotation'/>
          <content-type mime-type='text/plain'/>
          <!-- TODO eventually, this would be an ad-hoc xml schema
          <content-type mime-type="text/xml">
            <schema>...</schema>
          </content-type>
          -->
        </relation-type>
      </relation-types>
    </schema>
  </schemas>
  <views>
    <view viewable-class='annotation' id='annotation-view'>
      <content mime-type='text/html'>&lt;a tal:attributes="href here/absolute_url">Annotation &lt;em tal:content="here/id">Id&lt;/em>&lt;/a> (&lt;span tal:replace="python:here.content.data[:50]">Contenu&lt;/span>)</content>
    </view>
    <view viewable-class='annotation' id='table-row'>
      <content mime-type='text/html'>&lt;tr tal:attributes="bgcolor bgcolor">
&lt;td>&lt;a tal:attributes="href here/absolute_url; title here/type/title" tal:content="here/id">Id&lt;/a>&lt;/td>
&lt;td tal:content="here/type/id">Type&lt;/td>
&lt;td tal:content="here/fragment/formatted/begin">Begin&lt;/td>
&lt;td tal:content="here/fragment/formatted/end">End&lt;/td>
&lt;td tal:content="here/content/data">Contenu&lt;/td>
&lt;/tr></content>
    </view>
    <view viewable-class='*' id='print-default-views'>
      <content mime-type='text/html'>&lt;?xml version="1.0" encoding="utf-8"?>
&lt;h1>Liste des vues appliquées par défaut&lt;/h1>

&lt;table border="1" tal:define="p here/ownerPackage">
&lt;tr>&lt;th>Élément&lt;/th>&lt;th>Vue&lt;/th>&lt;/tr>
&lt;tr tal:define="e p">
&lt;td tal:content="e/viewableClass">Class&lt;/td>
&lt;td tal:content="structure e/findDefaultView/view/item-view | string:Aucune">Vue&lt;/td>
&lt;/tr>

&lt;tr tal:define="e p/annotations">
&lt;td tal:content="e/viewableClass">Classe&lt;/td>
&lt;td tal:content="structure e/findDefaultView/view/item-view | string:Aucune">Vue&lt;/td>
&lt;/tr>

&lt;tr tal:define="e p/schemas">
&lt;td tal:content="e/viewableClass">Classe&lt;/td>
&lt;td tal:content="structure e/findDefaultView/view/item-view | string:Aucune">Vue&lt;/td>
&lt;/tr>


&lt;span tal:define="e python:p.annotations[0]">
&lt;tr>
&lt;td tal:content="e/viewableClass">Classe&lt;/td>
&lt;td tal:content="structure e/findDefaultView/view/item-view | string:Aucune">Vue&lt;/td>
&lt;/tr>
&lt;/span>

&lt;span tal:define="v python:p.views[0]">
&lt;tr>
&lt;td tal:content="v/viewableClass">Classe&lt;/td>
&lt;td tal:content="structure v/findDefaultView/view/item-view | string:Aucune">Vue&lt;/td>
&lt;/tr>
&lt;/span>

&lt;span tal:define="t python:p.annotationTypes[0]">
&lt;tr>
&lt;td tal:content="t/viewableClass">Class&lt;/td>
&lt;td tal:content="structure t/findDefaultView/view/item-view | string:Aucune">Vue&lt;/td>
&lt;/tr>
&lt;/span>


&lt;/table>
</content>
    </view>
    <view viewable-class='package' id='package-view'>
      <content mime-type='text/html'>&lt;h1>Contenu du recueil &lt;em tal:content="here/title">Titre&lt;/em> créé par &lt;address tal:content="here/author">Auteur&lt;/address>&lt;/h1>

&lt;h2>&lt;a tal:attributes="href string:${here/absolute_url}/annotations">Annotations&lt;/a>&lt;/h2>
&lt;table width="100%" border="1">
  &lt;tr tal:repeat="a here/annotations">
   &lt;td tal:replace="structure a/view/table-row">Annotation&lt;/td>
  &lt;/tr>
&lt;/table>

&lt;h2>&lt;a tal:attributes="href string:${here/absolute_url}/relations">Relations&lt;/a>&lt;/h2>
&lt;ul>
  &lt;li tal:repeat="r here/relations">
   &lt;a tal:attributes="href string:${r/absolute_url}; title r/type/title" tal:content="structure r/view/item-view">Relation&lt;/a>
  &lt;/li>
&lt;/ul>

&lt;h2>&lt;a tal:attributes="href string:${here/absolute_url}/views/view/views-view">Vues&lt;/a>&lt;/h2>

&lt;p>Des &lt;a tal:attributes="href string: ${here/absolute_url}/view/print-default-views">vues par défaut&lt;/a> sont appliquées automatiquement aux éléments.&lt;/p>

&lt;span tal:replace="structure here/views/view/views-view">Views&lt;/span>

&lt;h2>&lt;a tal:attributes="href string:${here/absolute_url}/schemas">Schémas&lt;/a>&lt;/h2>
&lt;ul>
  &lt;li tal:repeat="s here/schemas">
   &lt;a tal:attributes="href s/absolute_url" tal:content="structure s/view/item-view">Schéma&lt;/a>
  &lt;/li>
&lt;/ul>
</content>
    </view>
    <view viewable-class='list' id='bundle-view'>
      <content mime-type='text/html'>&lt;ul>
&lt;li tal:repeat="item here">
   &lt;a tal:attributes="href item/absolute_url" tal:content="structure item/view/item-view">Item&lt;/a>
&lt;/li>
&lt;/ul></content>
    </view>
    <view viewable-class='list' id='schema-bundle-view'>
      <content mime-type='text/html'>&lt;h1>Liste des schémas&lt;/h1>

&lt;ul tal:repeat="item here/ids">
   &lt;a tal:attributes="href item/absolute_url" tal:content="structure item/view">Item&lt;/a>
&lt;/ul></content>
    </view>
    <view viewable-class='view' id='view-view'>
      <content mime-type='text/html'>&lt;p>Vue &lt;strong tal:content="here/id">Id&lt;/strong> applicable sur &lt;em tal:content="here/matchFilter">class&lt;/em>&lt;/p>
&lt;pre tal:content="here/content/data">
Contenu
&lt;/pre></content>
    </view>
    <view viewable-class='annotation-type' id='annotation-type-view'>
      <content mime-type='text/html'>&lt;p>Type &lt;em tal:content="here/id">id&lt;/em> : &lt;span tal:replace="here/title">Titre&lt;/span>&lt;/p>
&lt;p>&lt;a here="annotations" tal:attributes="href here/annotations/absolute_url" tal:content="python: '%d annotations' % len(here.annotations)">Nombre d'annotations&lt;/a> definies.&lt;/p></content>
    </view>
    <view viewable-class='*' id='edit-content'>
      <content mime-type='text/html'>&lt;span tal:condition="python: hasattr(here, 'content')">
&lt;form method="POST" tal:attributes="action here/absolute_url">
&lt;input type="submit" value="Submit" />
&lt;textarea tal:attributes="cols options/config/edit-width | 60; rows options/config/edit-height | 20" tal:content="here/content/data" rows="20" cols="60" name="data">
Contenu
&lt;/textarea>&lt;br />
&lt;input type="hidden" name="key" value="contentData">
&lt;input type="hidden" name="action" value="update">
&lt;input type="submit" value="Submit" />
&lt;/form>
&lt;/span>

&lt;span tal:condition="python: not hasattr(here, 'content')">
&lt;p>This view cannot be applied on an element which does not have a &lt;em>content&lt;/em>.&lt;/p>
&lt;/span>
</content>
    </view>
    <view viewable-class='*' id='generic'>
      <content mime-type='text/html'>&lt;p>Vue générique de &lt;span tal:replace="here/uri">URI&lt;/span>&lt;/p>
</content>
    </view>
    <view viewable-class='*' id='item-view'>
      <content mime-type='text/html'>&lt;span tal:replace="here/viewableClass">Classe&lt;/span>
&lt;strong tal:content="here/id">Id&lt;/strong>
&lt;span tal:condition="exist: here/matchFilter" comment="is_a_view">
 applicable sur &lt;em tal:content="here/matchFilter">filtre&lt;/em>
&lt;/span>
</content>
    </view>
    <view viewable-class='schema' id='schema-view'>
      <content mime-type='text/html'>&lt;p>Schema &lt;strong tal:content="here/id">Id&lt;/strong>&lt;/p>

&lt;p>Types d'annotation définis :&lt;/p>

&lt;ul>
  &lt;li tal:repeat="t here/annotationTypes">
   &lt;a tal:attributes="href t/absolute_url" tal:content="structure t/view/type-view">Type&lt;/a>
&lt;/li>
&lt;/ul>

&lt;p>Types de relation définis :&lt;/p>

&lt;ul>
  &lt;li tal:repeat="t here/relationTypes">
   &lt;a tal:attributes="href t/absolute_url" tal:content="structure t/view/relation-type-view">Type&lt;/a>
&lt;/li>
&lt;/ul>
</content>
    </view>
    <view viewable-class='schema' id='add-view'>
      <content mime-type='text/html'>&lt;h1>Créer une nouvelle vue dans le recueil &lt;em tal:content="here/ownerPackage/uri">Nom&lt;/em>&lt;/h1>
&lt;form method="POST" tal:attributes="action here/ownerPackage/absolute_url">

&lt;input type="hidden" name="type" value="view">
&lt;input type="hidden" name="action" value="create">

Identificateur : &lt;input type="text" name="id">&lt;br />
Applicable sur : &lt;select name="class">
&lt;option>*&lt;/option>
&lt;option>annotation&lt;/option>
&lt;option>annotation-type&lt;/option>
&lt;option>content&lt;/option>
&lt;option>fragment&lt;/option>
&lt;option>list&lt;/option>
&lt;option>package&lt;/option>
&lt;option>query&lt;/option>
&lt;option>relation&lt;/option>
&lt;option>relation-type&lt;/option>
&lt;option>schema&lt;/option>
&lt;option>view&lt;/option>
&lt;/select>&lt;br />
Content :&lt;br />
&lt;textarea name="data" rows="20" cols="80">
&lt;/textarea>&lt;br />
&lt;input type="submit" value="Create">
&lt;/form>
</content>
    </view>
    <view viewable-class='annotation' id='full-view'>
      <content mime-type='text/html'>&lt;h1>Annotation &lt;em tal:content="here/id">Id&lt;/em>&lt;/h1>

&lt;p>Début: &lt;span tal:replace="here/fragment/begin">Begin&lt;/span>&lt;/p>

&lt;p>Fin: &lt;span tal:replace="here/fragment/end">End&lt;/span>&lt;/p>
&lt;p>Type: &lt;span tal:replace="here/type">Type&lt;/span>&lt;/p>
&lt;p>Type du contenu: &lt;span tal:replace="here/content/type">Content-type&lt;/span>&lt;/p>
&lt;p>&lt;a tal:attributes="href string:${here/content/absolute_url}/data">Content&lt;/a>&lt;/p>
</content>
    </view>
    <view viewable-class='view' id='epoz'>
      <content mime-type='text/html'>    &lt;div class="epoz-fulleditor" metal:use-macro="epozmacros/macros/epoz_fulleditor">
      &lt;iframe metal:fill-slot="epoz_editorframe"
              id="epoz-editor"
              class="epoz-editorframe" 
              usecss="1"
              tal:attributes="src string:${here/content/data/absolute_url}?mode=raw;
                              dst here/content/absolute_url"
       onload="startEpoz()">              
&lt;/iframe>
    &lt;/div>
</content>
    </view>
    <view viewable-class='list' id='views-view'>
      <content mime-type='text/html'>&lt;table border="1">
  &lt;tr>
  &lt;th>View id&lt;/th>
  &lt;th colspan="2">Filter&lt;/th>
  &lt;th>Actions&lt;/th>
  &lt;/tr>

  &lt;tr tal:repeat="v here">
    &lt;td>
     &lt;a tal:attributes="href v/absolute_url" tal:content="structure v/id">View Id&lt;/a>
    &lt;/td>
    &lt;td tal:content="v/matchFilter/class">Class&lt;/td>
    &lt;td tal:content='structure v/matchFilter/type | string::'>Type&lt;/td>
    &lt;td>
&lt;a title="Edit view" tal:attributes="href string:${v/absolute_url}/view/edit-content">Edit&lt;/a>
&lt;span tal:condition='python: v.match(v.rootPackage)'>
| &lt;a title="Rich-edit view" tal:attributes="href string:${v/absolute_url}/view/epoz">Epoz&lt;/a>
| &lt;a title="Apply view on ownerPackage" tal:attributes="href string:${v/rootPackage/absolute_url}/view/${v/id}">Apply&lt;/a> &lt;/span>
  &lt;/td>
  &lt;/tr>

&lt;/table>
</content>
    </view>
    <view viewable-class='relation' id='relation-view'>
      <content mime-type='text/html'>Relation &lt;em tal:content="here/id">Id&lt;/em> entre &lt;a href="annotation1" tal:attributes="href here/members/first/absolute_url" tal:content="here/members/first/content/data">Annotation 1&lt;/a> et &lt;a href="annotation2" tal:attributes="href here/members/last/absolute_url" tal:content="here/members/last/content/data">Annotation 2&lt;/a></content>
    </view>
    <view viewable-class='annotation-type' id='type-view'>
      <content mime-type='text/html'>&lt;p>Type &lt;em tal:content="here/id">id&lt;/em> : &lt;span tal:replace="here/title">Titre&lt;/span>&lt;/p>
&lt;p>&lt;a here="annotations" tal:attributes="href here/annotations" tal:content="python: '%d annotations' % len(here.annotations)">Nombre d'annotations&lt;/a> definies.&lt;/p>
</content>
    </view>
    <view viewable-class='relation-type' id='relation-type-view'>
      <content mime-type='text/html'>&lt;p>Type de relation &lt;em tal:content="here/id">id&lt;/em> : &lt;span tal:replace="here/title">Titre&lt;/span>&lt;/p>
&lt;p>&lt;a here="relations" tal:attributes="href here/relations/absolute_url" tal:content="python: '%d relations' % len(here.relations)">Nombre de relations&lt;/a> definies.&lt;/p></content>
    </view>
  </views>
</package>
